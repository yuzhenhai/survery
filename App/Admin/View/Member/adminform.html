<include file="Public/head"/>
<body class="no-skin">
<include file="Public/header"/>
<div class="main-container" id="main-container">
    <script type="text/javascript">
        try {
            ace.settings.check('main-container', 'fixed')
        } catch (e) {
        }
    </script>

    <include file="Public/sidebar"/>
    <div class="main-content">
        <div class="main-content-inner">
            <!-- #section:basics/content.breadcrumbs -->
            <include file="Public/breadcrumbs"/>

            <!-- /section:basics/content.breadcrumbs -->
            <div class="page-content">
                <include file="Public/set"/>

                <!-- /section:settings.box -->
                <div class="row">
                    <div class="col-xs-12">
                        <div class="page-header">
                            <h1>编辑用户信息</h1>
                        </div><!-- /.page-header -->    
                        <!-- PAGE CONTENT BEGINS -->
                        <form class="form-horizontal" id="form" role="form" enctype="multipart/form-data" action="{:U('update')}" method="post">
                            <div class="form-group">
                                <label class="col-sm-1 control-label no-padding-right" for="form-field-1"> 用户名 </label>
                                <div class="col-sm-9">
                                    <input type="text"
                                    <if condition="$member['uid'] eq 1">readonly
                                        <else/>
                                        name="user"
                                    </if>
                                    class="rcol-xs-10 col-sm-5" value="{$member.user}">
                                    <input type="hidden" name="uid" value="{$member['uid']}">
                                    <span class="help-inline col-xs-12 col-sm-7">
										<if condition="$member['uid'] eq 1"><span class="middle">无法修改</span></if>
										</span>
                                </div>
                            </div>
                            <div class="space-4"></div>
                            <div class="form-group">
                                <label class="col-sm-1 control-label no-padding-right" for="form-field-2"> 用户密码 </label>
                                <div class="col-sm-9">
                                    <input type="password" name="password" id="password" placeholder="用户密码" class="col-xs-10 col-sm-5" value="">
                                    <span class="help-inline col-xs-12 col-sm-7">
                                        <span class="middle">不修改请留空</span>
                                    </span>
                                </div>
                            </div>

                            <div class="space-4"></div>
                             <div class="form-group">
                                <label class="col-sm-1 control-label no-padding-right" for="form-field-1"> 真实姓名</label>
                                <div class="col-sm-9">
                                    <input type="text" name="realname" class="rcol-xs-10 col-sm-5" value="{$member.realname}"  placeholder="真实姓名">
                                    <span class="help-inline col-xs-12 col-sm-7">
                                        <span class="middle"></span>
                                    </span>
                                </div>
                            </div>

                            <div class="space-4"></div>

                            <div class="form-group">
                                <label class="col-sm-1 control-label no-padding-right" for="form-field-10"> 管理组 </label>
                                <div class="col-sm-9">
                                    <if condition="$member['uid'] eq 1">
                                        <input type="text" class="col-xs-10 col-sm-5" value="超级管理员" readonly>
                                        <input type="hidden" name="group_id" id="group_id"  class="col-xs-10 col-sm-5" value="1">
                                    <else/>
                                        <select id="group_id" name="group_id" class="rcol-xs-10 col-sm-5">
                                            <volist name="usergroup" id="val">
                                                <option value="{$val['id']}"
                                                <if condition="$val['id'] eq $member['group_id']">selected="selected"
                                                </if>
                                                >{$val['title']}</option>
                                            </volist>
                                        </select>
                                    </if>
                                </div>
                            </div>

                            <div class="space-4"></div>
                            <div class="form-group">
                                <label class="col-sm-1 control-label no-padding-right" for="form-field-1"> 头像 </label>
                                <div class="col-sm-5">  
                                    <input type="hidden" name="head" value="{$member['head']}" />
                                    <input type="file" name="image" value="" class="id-image" />
                                    <span class="help-inline col-xs-12 col-sm-7"> <span class="middle"></span> </span>  
                                </div>
                            </div>

                            <div class="space-4"></div>

                            <div class="form-group">
                                <label class="col-sm-1 control-label no-padding-right" for="form-field-4"> 性别 </label>
                                <div class="col-sm-9">
                                    <select id="sex" name="sex" class="multiselect">
                                        <option value="0"
                                        <if condition="$member['sex'] eq 0">selected="selected"</if>
                                        >保密</option>
                                        <option value="1"
                                        <if condition="$member['sex'] eq 1">selected="selected"</if>
                                        >男</option>
                                        <option value="2"
                                        <if condition="$member['sex'] eq 2">selected="selected"</if>
                                        >女</option>
                                    </select>
                                </div>
                            </div>

                            <div class="space-4"></div>

                            <div class="form-group">
                                <label class="col-sm-1 control-label no-padding-right" for="form-field-6"> 电话号码 </label>
                                <div class="col-sm-9">
                                    <input type="text" name="phone" id="phone" placeholder="电话号码" class="col-xs-10 col-sm-5" value="{$member['phone']}">
                                    <span class="help-inline col-xs-12 col-sm-7">
										<span class="middle"></span>
									</span>
                                </div>
                            </div>

                            <div class="space-4"></div>

                            <div class="form-group">
                                <label class="col-sm-1 control-label no-padding-right" for="form-field-8">
                                    E-mail </label>
                                <div class="col-sm-9">
                                    <input type="email" name="email" id="email" placeholder="E-mail"
                                           class="col-xs-10 col-sm-5" value="{$member['email']}">
                                    <span class="help-inline col-xs-12 col-sm-7">
										<span class="middle"></span>
									</span>
                                </div>
                            </div>

                            <div class="space-4"></div>

                            <div class="form-group">
                                <label class="col-sm-1 control-label no-padding-right" for="form-field-4"> 状态 </label>
                                <div class="col-sm-9">
                                    <select id="status" name="status" class="multiselect">
                                        <option value="0"
                                        <if condition="$member['status'] eq 0">selected="selected"</if>
                                        >停用</option>
                                        <option value="1"
                                        <if condition="$member['status'] eq 1">selected="selected"</if>
                                        >启用</option>
                                    </select>
                                </div>
                            </div>
                            <div class="space-4"></div>
                            <div class="form-group">
                                <label class="col-sm-1 control-label no-padding-right" for="form-field-2"> 备注 </label>
                                <div class="col-sm-9">
                                    <textarea name="remark" id="remark" placeholder="备注"
                                              class="col-xs-10 col-sm-5" rows="5">{$member['remark']}</textarea>
                                </div>
                            </div>
                            <div class="col-md-offset-2 col-md-9">
                                <button class="btn btn-info submit" type="submit">
                                    <i class="icon-ok bigger-110"></i>
                                    提交
                                </button>
                                &nbsp; &nbsp; &nbsp;
                                <button class="btn" type="reset">
                                    <i class="icon-undo bigger-110"></i>
                                    重置
                                </button>
                            </div>
                        </form>
                        <!-- PAGE CONTENT ENDS -->
                    </div><!-- /.col -->
                </div><!-- /.row -->
            </div><!-- /.page-content -->
        </div>
    </div><!-- /.main-content -->
    <include file="Public/footer"/>

</div><!-- /.main-container -->

<include file="Public/footerjs"/>
<!-- inline scripts related to this page -->
<script src="__PUBLIC__/themes/js/date-time/bootstrap-datepicker.js"></script>
<script src="__PUBLIC__/themes/js/bootstrap-wysiwyg.js"></script>
<script src="__PUBLIC__/themes/js/function.js"></script>
<script type="text/javascript">

    $(function () {

        $(".submit").click(function () {
            $("#form").submit();
        })

        $('#birthday').datepicker({
            format: 'yyyy-mm-dd',
            weekStart: 1,
            autoclose: true,
            todayBtn: 'linked',
            language: 'cn'
        });

        function showErrorAlert (reason, detail) {
            var msg='';
            if (reason==='unsupported-file-type') { msg = "Unsupported format " +detail; }
            else {
                //console.log("error uploading file", reason, detail);
            }
            $('<div class="alert"> <button type="button" class="close" data-dismiss="alert">&times;</button>'+ 
             '<strong>File upload error</strong> '+msg+' </div>').prependTo('#alerts');
        }

        $('.id-image').ace_file_input({
            style: 'well',
            btn_choose : 'Drop images here or click to choose',
            no_icon : 'ace-icon fa fa-picture-o',
            btn_change: null,
            droppable: true,
            thumbnail: 'small'
            ,
            preview_error : function(filename, error_code) {

            }
    
        }).on('change', function(){

        });
        var image = "{$member.head}";
        if(image != ''){
            $("input[name='image']").ace_file_input('show_file_list', [
               {type: 'image',  name: "{$Think.CONFIG.website}{$Think.config.AVATAR_PATH}{$member.head}"}
            ]);
        }
    });
</script>
</body>
</html>